<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns=http://www.w3.org/1999/xhtml lang=en-US><head profile=http://gmpg.org/xfn/11><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>How To Configure iSCSI Target And Initiator In Linux</title><script src="/cdn-cgi/apps/head/eGMSoIidnAaUrPJDID09epjSyt8.js"></script><link rel=stylesheet href=https://www.rootusers.com/wp-content/cache/minify/de2dd.css media=all><link rel=pingback href=https://www.rootusers.com/xmlrpc.php><meta name='robots' content='index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1'><meta name="description" content="Learn how to configure an iSCSI target server to provide seemingly locally attached storage over the network to an iSCSI initiator client in Linux."><link rel=canonical href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="How To Configure iSCSI Target And Initiator In Linux"><meta property="og:description" content="Learn how to configure an iSCSI target server to provide seemingly locally attached storage over the network to an iSCSI initiator client in Linux."><meta property="og:url" content="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/"><meta property="og:site_name" content="RootUsers"><meta property="article:publisher" content="https://www.facebook.com/rootusers1/"><meta property="article:published_time" content="2016-03-01T13:01:19+00:00"><meta property="article:modified_time" content="2019-06-10T04:12:42+00:00"><meta property="og:image" content="https://www.rootusers.com/wp-content/uploads/2016/01/configure-iscsi-target-and-initiator-linux.png"><meta property="og:image:width" content="300"><meta property="og:image:height" content="200"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@rootusers_"><meta name="twitter:site" content="@rootusers_"><meta name="twitter:label1" content="Written by"><meta name="twitter:data1" content="Jarrod"><meta name="twitter:label2" content="Est. reading time"><meta name="twitter:data2" content="12 minutes"> <script type=application/ld+json class=yoast-schema-graph>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.rootusers.com/#website","url":"https://www.rootusers.com/","name":"RootUsers","description":"Guides, tutorials, reviews and news for System Administrators.","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://www.rootusers.com/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#primaryimage","inLanguage":"en-US","url":"https://www.rootusers.com/wp-content/uploads/2016/01/configure-iscsi-target-and-initiator-linux.png","contentUrl":"https://www.rootusers.com/wp-content/uploads/2016/01/configure-iscsi-target-and-initiator-linux.png","width":300,"height":200,"caption":"How To Configure iSCSI Target And Initiator In Linux"},{"@type":"WebPage","@id":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#webpage","url":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/","name":"How To Configure iSCSI Target And Initiator In Linux","isPartOf":{"@id":"https://www.rootusers.com/#website"},"primaryImageOfPage":{"@id":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#primaryimage"},"datePublished":"2016-03-01T13:01:19+00:00","dateModified":"2019-06-10T04:12:42+00:00","author":{"@id":"https://www.rootusers.com/#/schema/person/fef4c11b68480475800d73659aa28409"},"description":"Learn how to configure an iSCSI target server to provide seemingly locally attached storage over the network to an iSCSI initiator client in Linux.","breadcrumb":{"@id":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/"]}]},{"@type":"BreadcrumbList","@id":"https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.rootusers.com/"},{"@type":"ListItem","position":2,"name":"How To Configure An iSCSI Target And Initiator In Linux"}]},{"@type":"Person","@id":"https://www.rootusers.com/#/schema/person/fef4c11b68480475800d73659aa28409","name":"Jarrod","sameAs":["http://www.rootusers.com"],"url":"https://www.rootusers.com/author/jarrod/"}]}</script> <link rel=dns-prefetch href=//www.rootusers.com><link rel=dns-prefetch href=//s.w.org><link rel=dns-prefetch href=//v0.wordpress.com><link rel=alternate type=application/rss+xml title="RootUsers &raquo; Feed" href=https://www.rootusers.com/feed/><link rel=alternate type=application/rss+xml title="RootUsers &raquo; Comments Feed" href=https://www.rootusers.com/comments/feed/><link rel=alternate type=application/rss+xml title="RootUsers &raquo; How To Configure An iSCSI Target And Initiator In Linux Comments Feed" href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/feed/> <script type="92cf0ff1378341c9287dec5e-text/javascript">window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.1.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.rootusers.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.8.2"}};!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([10084,65039,8205,55357,56613],[10084,65039,8203,55357,56613])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type=text/css>img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0 .07em !important;vertical-align:-0.1em !important;background:none !important;padding:0 !important}</style><link rel=stylesheet href=https://www.rootusers.com/wp-content/cache/minify/a5ff7.css media=all><style id=wp-block-library-inline-css type=text/css>.has-text-align-justify{text-align:justify}</style><link rel=stylesheet href=https://www.rootusers.com/wp-content/cache/minify/14615.css media=all> <script type="92cf0ff1378341c9287dec5e-text/javascript" id=jetpack_related-posts-js-extra>var related_posts_js_options={"post_heading":"h4"};</script> <script defer src=https://www.rootusers.com/wp-content/cache/minify/8efe6.js type="92cf0ff1378341c9287dec5e-text/javascript"></script> <link rel=https://api.w.org/ href=https://www.rootusers.com/wp-json/><link rel=alternate type=application/json href=https://www.rootusers.com/wp-json/wp/v2/posts/2330><link rel=EditURI type=application/rsd+xml title=RSD href=https://www.rootusers.com/xmlrpc.php?rsd><link rel=wlwmanifest type=application/wlwmanifest+xml href=https://www.rootusers.com/wp-includes/wlwmanifest.xml><meta name="generator" content="WordPress 5.8.2"><link rel=shortlink href=https://wp.me/p5y7ho-BA><link rel=alternate type=application/json+oembed href="https://www.rootusers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-configure-an-iscsi-target-and-initiator-in-linux%2F"><link rel=alternate type=text/xml+oembed href="https://www.rootusers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-configure-an-iscsi-target-and-initiator-in-linux%2F&#038;format=xml"><style type=text/css>img#wpstats{display:none}</style><meta name="viewport" content="width=device-width"></head><body class="post-template-default single single-post postid-2330 single-format-standard"><div id=nav><div class=nav-inside><div id=menus><ul id=menus-dt class=menus-dt>
<li id=menu-item-1580 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1580"><a href=https://www.rootusers.com/>Home</a></li>
<li id=menu-item-3012 class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3012"><a href=https://www.rootusers.com/category/linux/>Linux</a></li>
<li id=menu-item-3013 class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3013"><a href=https://www.rootusers.com/category/windows/>Windows</a></li>
<li id=menu-item-3014 class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3014"><a href=https://www.rootusers.com/category/security/>Security</a></li>
<li id=menu-item-3015 class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3015"><a href=https://www.rootusers.com/category/exam-guides/>Exam Guides</a><ul class=sub-menu>
<li id=menu-item-2087 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2087"><a href=https://www.rootusers.com/red-hat-certified-engineer-rhce-7-ex300-study-guide/>Red Hat Certified Engineer (RHCE) 7 EX300 Study Guide</a></li>
<li id=menu-item-5173 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5173"><a href=https://www.rootusers.com/red-hat-certified-system-administrator-rhcsa-ex200-study-guide/>Red Hat Certified System Administrator (RHCSA) 8 EX200 Study Guide</a></li>
<li id=menu-item-3524 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3524"><a href=https://www.rootusers.com/microsoft-70-744-securing-windows-server-2016-study-guide/>Microsoft 70-744 Securing Windows Server 2016 Study Guide</a></li></ul>
</li>
<li id=menu-item-1582 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1582"><a href=https://www.rootusers.com/archives/>Archives</a></li>
<li id=menu-item-1581 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1581"><a href=https://www.rootusers.com/about/>About</a></li>
<li id=menu-item-3011 class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3011"><a href=https://www.rootusers.com/contact/>Contact</a></li></ul><ul id=menus-m class=menus-m>
<li>Menu</li></ul></div><div id=search><form id=searchform method=get action=https://www.rootusers.com/>
<input type=text value="Search: type, hit enter" onfocus="if (!window.__cfRLUnblockHandlers) return false; if (this.value == 'Search: type, hit enter') {this.value = '';}" onblur="if (!window.__cfRLUnblockHandlers) return false; if (this.value == '') {this.value = 'Search: type, hit enter';}" size=35 maxlength=50 name=s id=s data-cf-modified-92cf0ff1378341c9287dec5e-="">
<input type=submit id=searchsubmit value=SEARCH></form></div></div></div><div id=header><div class=site_title><h1><a href=https://www.rootusers.com/>RootUsers</a></h1><h2>Guides, tutorials, reviews and news for System Administrators.</h2><div class=clear></div></div></div><div id=wrapper><div id=content><div class="post-single post-2330 post type-post status-publish format-standard has-post-thumbnail hentry category-how-to category-linux tag-iscsi tag-linux tag-rhce" id=post-2330><h2 class="title">How To Configure An iSCSI Target And Initiator In Linux</h2><div class=post-info-top>
<span class=post-info-date>
Posted by <a href=https://www.rootusers.com/author/jarrod/ title="View all posts by Jarrod" rel=author>Jarrod</a>
on March 2, 2016	</span>
<span class=addcomment><a href=#respond rel=nofollow title="Leave a comment ?">Leave a comment</a> (10)</span>
<span class=gotocomments><a href=#comments rel=nofollow title="Go to comments ?">Go to comments</a></span></div><div class=clear></div><div class=entry><p>With an iSCSI target we can provide access to disk storage on a server over the network to a client iSCSI initiator. The iSCSI initiator will then be able to use the storage from the iSCSI target server as if it were a local disk.</p><p>Here we cover how you can set up both an iSCSI target and an iSCSI initiator in Linux and connect them together.</p><p><span id=more-2330></span></p><hr><p><a href="https://www.udemy.com/red-hat-certified-engineer-rhce-upgrading-from-rhcsa/?couponCode=ROOTUSER" target=_blank rel="noopener noreferrer"><img loading=lazy src=https://www.rootusers.com/wp-content/uploads/2017/02/red-hat-certified-engineer-rhce-video-course.jpg alt="Red Hat Certified Engineer RHCE Video Course" width=600 height=150 class="aligncenter size-full wp-image-3781" srcset="https://www.rootusers.com/wp-content/uploads/2017/02/red-hat-certified-engineer-rhce-video-course.jpg 600w, https://www.rootusers.com/wp-content/uploads/2017/02/red-hat-certified-engineer-rhce-video-course-300x75.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"></a><br>
Studying for your RHCE certification? Checkout our <a href="https://www.udemy.com/red-hat-certified-engineer-rhce-upgrading-from-rhcsa/?couponCode=ROOTUSER" target=_blank rel="noopener noreferrer">RHCE video course over at Udemy</a> which is 20% off when you use the code ROOTUSER.</p><hr><h2>Example Environment</h2><p>In this example we will be working with two different Linux servers, both of which are running CentOS 7.</p><ul>
<li>Client: 192.168.1.100: This Linux system acts as the iSCSI initiator, it will connect to the iSCSI target on the server over the network.</li>
<li>Server: 192.168.1.200: This Linux system acts as the iSCSI target server, it provides the disk space that will be accessible over the network to the client.</li></ul><h2>Configure iSCSI Target</h2><p>First we&#8217;ll start by configuring the iSCSI target on our server, which will be offering its disk space over the network to our client which is the iSCSI initiator.</p><p>We want to install the &#8216;targetcli&#8217; package on the server, this provides a shell for viewing and modifying the target configuration so that we can export local storage resources such as files, volumes or RAM disks to external systems. The layout is tree based and navigation works in a similar way to moving through the file system with commands such as &#8216;cd&#8217; and &#8216;ls&#8217; available.</p><pre>yum install targetcli -y
</pre><p>Once installed we want to start the target service, and enable it so that it automatically starts up on system boot.</p><pre>systemctl start target
systemctl enable target
</pre><p>For further information on basic service management with systemctl, see our guide <a href=https://www.rootusers.com/how-to-manage-linux-systemd-services-with-systemctl/ target=_blank rel="noopener noreferrer">here</a>.</p><p>Now we can run the targetcli command, followed by ls from within the targetcli prompt to get an idea of what is available.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b6c4d9d9c2f6c5d3c4c0d3c4">[email&#160;protected]</a> ~]# <strong>targetcli</strong>
Warning: Could not load preferences file /root/.targetcli/prefs.bin.
targetcli shell version 2.1.fb41
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type 'help'.

/&gt; <strong>ls</strong>
o- / .................................... [...]
  o- backstores ......................... [...]
  | o- block ............. [Storage Objects: 0]
  | o- fileio ............ [Storage Objects: 0]
  | o- pscsi ............. [Storage Objects: 0]
  | o- ramdisk ........... [Storage Objects: 0]
  o- iscsi ....................... [Targets: 0]
  o- loopback .................... [Targets: 0]
</pre><p>The targetcli command offers tab completion, so if you get stuck just press tab a couple of times to view available options. These will change depending on what level of the hierarchy you are in, and just like the file system you can always go up with &#8216;cd ..&#8217;.</p><h3>Creating a Backstore</h3><p>The first thing listed are the backstores. Backstores provide different ways of storing the data locally that will be exported to an external system. The available options are block, fileio, pscsi and ramdisk. In our example we&#8217;ll be demonstrating both block and fileio options as these are quite common.</p><p>A block backstore is simply a Linux block device such as a hard drive like /dev/sdc.</p><p>A fileio backstore is a file on the file system that has been created with a predefined size, generally the performance of a single file is not as good as a block backstore.</p><p>To create a backstore, type the backstores command followed by the type that you want to create, such as fileio. If you get stuck put the tab completion to work. Here we are creating the testfile fileio backstore, this will make a 500MB /tmp/fileio file on disk, where write_back=false simply says to not use any caching which will decrease performance but will reduce possible data loss &#8211; a better option in a production environment.</p><pre>/&gt; <strong>backstores/fileio create testfile /tmp/fileio 500M write_back=false</strong>
Created fileio testfile with size 524288000
</pre><p>If you&#8217;re using a block device rather than a file, the command would look like this. In this example we are using the disk /dev/sdc as our backstore.</p><pre>/&gt; <strong>backstores/block create name=block dev=/dev/sdc</strong>
Created block storage object block using /dev/sdc.
</pre><p>Once complete if you issue the &#8216;ls&#8217; command again and the backstores should be listed.</p><pre>/&gt; <strong>ls</strong>
o- / ...................................................... [...]
  o- backstores ........................................... [...]
  | o- block ............................... [Storage Objects: 1]
  | | o- block ....... [/dev/sdc (1.0GiB) write-thru deactivated]
  | o- fileio .............................. [Storage Objects: 1]
  | | o- testfile .. [/tmp/fileio (500.0MiB) write-thru deactivated]
  | o- pscsi ............................... [Storage Objects: 0]
  | o- ramdisk ............................. [Storage Objects: 0]
  o- iscsi ......................................... [Targets: 0]
  o- loopback ...................................... [Targets: 0]
</pre><h3>Create the iSCSI Target and Portal</h3><p>Next we want to create the actual iSCSI target itself, start by moving into the iSCSI path as shown below. You don&#8217;t need to prepend the &#8216;cd&#8217; command to access it, however that works as well.</p><pre>/&gt; <strong>iscsi/</strong>
</pre><p>Once in here, we can create the iSCSI target with a specific IQN (iqn.2016-01.com.example) and iSCSI target name (target).</p><pre>/iscsi&gt; <strong>create iqn.2016-01.com.example:target</strong>
Created target iqn.2016-01.com.example:target.
Created TPG 1.
Global pref auto_add_default_portal=true
Created default portal listening on all IPs (0.0.0.0), port 3260.
</pre><p>Alternatively you can just enter &#8216;create&#8217; by itself and it will automatically use a default IQN and target name, you don&#8217;t have to manually pick these however the option is nice.</p><p>Now if we run &#8216;ls&#8217; again we should see our iSCSI target listed.</p><pre>/iscsi&gt; <strong>ls</strong>
o- iscsi ............................. [Targets: 1]
  o- iqn.2016-01.com.example:target ..... [TPGs: 1]
    o- tpg1 ................ [no-gen-acls, no-auth]
      o- acls ........................... [ACLs: 0]
      o- luns ........................... [LUNs: 0]
      o- portals ..................... [Portals: 1]
        o- 0.0.0.0:3260 ...................... [OK]
</pre><p>As we can see here, a portal has already been created. As of RHEL 7.1 once a target has been set, a default portal will also be configured which will listen on TCP port 3260 on 0.0.0.0.</p><h3>Create a LUN</h3><p>Next we want to make a LUN with our previously defined backstore.</p><p>First move into the target portal group (TPG) that was just created.</p><pre>/iscsi&gt; <strong>iqn.2016-01.com.example:target/tpg1/</strong>
</pre><p>After this we can create the LUN, specifying any backstore that we have previously created. By default a LUN created in this way will have read-write permissions applied. Here we create a LUN for both our fileio and block backstores.</p><pre>/iscsi/iqn.20...e:target/tpg1&gt; <strong>luns/ create /backstores/fileio/testfile</strong>
Created LUN 0.

/iscsi/iqn.20...e:target/tpg1&gt; <strong>luns/ create /backstores/block/block</strong>
Created LUN 1.
</pre><p>Now if we execute &#8216;ls&#8217; we should see both of our LUNs present.</p><pre>/iscsi/iqn.20...e:target/tpg1&gt; <strong>ls</strong>
o- tpg1 .................... [no-gen-acls, no-auth]
  o- acls ............................... [ACLs: 0]
  o- luns ............................... [LUNs: 2]
  | o- lun0 ....... [fileio/testfile (/tmp/fileio)]
  | o- lun1 .............. [block/block (/dev/sdc)]
  o- portals ......................... [Portals: 1]
    o- 0.0.0.0:3260 .......................... [OK]
</pre><h3>Create an ACL</h3><p>Now we need to configure an access control list (ACL) to define the initiators that are actually allowed to connect to the iSCSI target.</p><p>To do this, go to the client system that will be our iSCSI initiator and get the contents of the /etc/iscsi/initiatorname.iscsi file &#8211; you can edit this file if you want, otherwise the default is fine. This will work as long as what we configure in our ACL on the iSCSI target server is the same as the contents of this file on the iSCSI initiator client.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="41332e2e3501222d28242f35">[email&#160;protected]</a> ~]# <strong>cat /etc/iscsi/initiatorname.iscsi</strong>
InitiatorName=iqn.1994-05.com.redhat:5bf95f78165
</pre><p>Now that we have the name of our initiator from the client system, we enter the ACL section on the server within the TPG.</p><pre>/iscsi/iqn.20...e:target/tpg1&gt; <strong>acls/</strong>
</pre><p>Now create the ACL by specifying the initiator name found on the client system.</p><pre>/iscsi/iqn.20...get/tpg1/acls&gt; <strong>create iqn.1994-05.com.redhat:5bf95f78165</strong>
Created Node ACL for iqn.1994-05.com.redhat:5bf95f78165
Created mapped LUN 1.
Created mapped LUN 0.
</pre><p>Note that all LUNs that have been created within this iSCSI target will automatically be mapped to the ACL.</p><pre>/iscsi/iqn.20...get/tpg1/acls&gt; <strong>ls</strong>
o- acls ........................................ [ACLs: 1]
  o- iqn.1994-05.com.redhat:5bf95f78165 ..[Mapped LUNs: 2]
    o- mapped_lun0 .............. [lun0 fileio/file1 (rw)]
    o- mapped_lun1 ............... [lun1 block/block (rw)]
</pre><p>That&#8217;s all of the configuration required, we can use &#8216;cd&#8217; to go up to the root of the iSCSI target and then use &#8216;ls&#8217; to view all of the configuration.</p><pre>/iscsi/iqn.20...get/tpg1/acls&gt; <strong>cd ../..</strong>

/iscsi/iqn.20...xample:target&gt; <strong>ls</strong>
o- iqn.2016-01.com.example:target .......................... [TPGs: 1]
  o- tpg1 ..................................... [no-gen-acls, no-auth]
    o- acls ................................................ [ACLs: 1]
    | o- iqn.1994-05.com.redhat:5bf95f78165 ......... [Mapped LUNs: 2]
    |   o- mapped_lun0 ................... [lun0 fileio/testfile (rw)]
    |   o- mapped_lun1 ....................... [lun1 block/block (rw)]
    o- luns ................................................ [LUNs: 2]
    | o- lun0 ........................ [fileio/testfile (/tmp/fileio)]
    | o- lun1 ............................... [block/block (/dev/sdc)]
    o- portals .......................................... [Portals: 1]
      o- 0.0.0.0:3260 ........................................... [OK]
</pre><h3>Saving Changes</h3><p>To save the configuration, simply exit and this will write everything to the /etc/target/saveconfig.json file as shown below.</p><pre>/iscsi/iqn.20...xample:target&gt; <strong>exit</strong>
Global pref auto_save_on_exit=true
Last 10 configs saved in /etc/target/backup.
Configuration saved to /etc/target/saveconfig.json
</pre><h3>iSCSI Firewall Rules</h3><p>Once complete the target server should now be listening on TCP port 3260 as shown below.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="077568687347746275716275">[email&#160;protected]</a> ~]# <strong>netstat -antup | grep 3260</strong>
tcp        0      0 0.0.0.0:3260            0.0.0.0:*               LISTEN      -
</pre><p>Now we need to allow traffic through firewalld on this port.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5d2f3232291d2e382f2b382f">[email&#160;protected]</a> ~]# <strong>firewall-cmd --permanent --add-port=3260/tcp</strong>
success
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="82f0ededf6c2f1e7f0f4e7f0">[email&#160;protected]</a> ~]# <strong>firewall-cmd --reload</strong>
success
</pre><p>Our iSCSI target is now ready to accept connections from the iSCSI initiator on our client system (iqn.1994-05.com.redhat:5bf95f78165).</p><h2>Configure iSCSI Initiator</h2><p>Now that the iSCSI target has been configured and setup, we can proceed with configuring the iSCSI initiator on the client side to connect to the iSCSI target.</p><p>The initiator will need the iscsi-initiator-utils package to be installed prior to connecting, install it first as shown below.</p><pre>yum install iscsi-initiator-utils -y
</pre><p>Next be sure to start and enable both iscsid and iscsi. Note that you will likely need to restart these if you edit the IQN of the initiator later.</p><pre>systemctl enable iscsid iscsi
systemctl start iscsid iscsi
</pre><p>We will be connecting with the initiator name specified in the /etc/iscsi/initiatorname.iscsi file, if you modify this you will also need to update the ACL on the iSCSI target as it needs to be the same on both sides.</p><p>Next we can perform a discovery against the IP address of the target server to see what iSCSI targets are on offer. In this instance 192.168.1.200 is our iSCSI target server.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e2908d8d96a2818e8b878c96">[email&#160;protected]</a> ~]# <strong>iscsiadm --mode discovery --type sendtargets --portal 192.168.1.200</strong>
192.168.1.200:3260,1 iqn.2016-01.com.example:target
</pre><p>From the client system we can see that the available target, next we want to log into it in order to use it.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="deacb1b1aa9ebdb2b7bbb0aa">[email&#160;protected]</a> ~]# <strong>iscsiadm -m node -T iqn.2016-01.com.example:target -l</strong>
Logging in to [iface: default, target: iqn.2016-01.com.example:target, portal: 192.168.1.200,3260] (multiple)
Login to [iface: default, target: iqn.2016-01.com.example:target, portal: 192.168.1.200,3260] successful.
</pre><p>From the client we can view all active iSCSI sessions as shown below.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ea9885859eaa8986838f849e">[email&#160;protected]</a> mnt]# <strong>iscsiadm -m session -P 0</strong>
tcp: [1] 192.168.1.200:3260,1 iqn.2016-01.com.example:target (non-flash)
</pre><p>We can also change -P 0 to 1,2 or 3 for increasing levels of information.</p><p>The fileio and block disks shared from the iSCSI target are now available to the iSCSI initiator, as shown below. In this case local disk /dev/sdb is our fileio file over on the target server in /tmp/fileio, while local disk /dev/sdc is the block disk /dev/sdc over on the target server.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="483a27273c082b24212d263c">[email&#160;protected]</a> ~]# <strong>lsblk --scsi</strong>
NAME HCTL       TYPE VENDOR   MODEL             REV  TRAN
sda  2:0:0:0    disk VMware,  VMware Virtual S 1.0   spi
sdb  3:0:0:0    disk LIO-ORG  testfile         4.0   iscsi
sdc  3:0:0:1    disk LIO-ORG  block            4.0   iscsi
sr0  1:0:0:0    rom  NECVMWar VMware IDE CDR10 1.00  ata
</pre><p>Both of these disks are now usable as if they were normal locally attached disks to the client system.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f88a97978cb89b94919d968c">[email&#160;protected]</a> ~]# <strong>fdisk -l</strong>
Disk /dev/sdb: 524 MB, 524288000 bytes, 409600 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 8388608 bytes

Disk /dev/sdc: 1073 MB, 1073741824 bytes, 2097152 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 4194304 bytes
</pre><p>We can partition or put a file system onto them as if they were local disks.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c2e3333281c3f3035393228">[email&#160;protected]</a> ~]# <strong>mkfs.xfs /dev/sdb</strong>
meta-data=/dev/sdb               isize=256    agcount=4, agsize=12800 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=51200, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=853, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0

[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="40322f2f3400232c29252e34">[email&#160;protected]</a> ~]# <strong>mkfs.xfs /dev/sdc</strong>
...
</pre><p>From there we can mount them anywhere as required, here we mount to /mnt for testing and see that it&#8217;s available for use.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="32405d5d4672515e5b575c46">[email&#160;protected]</a> ~]# <strong>mount /dev/sdb /mnt</strong>

[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="45372a2a310526292c202b31">[email&#160;protected]</a> ~]# <strong>mkdir /mnt2</strong>

[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="81f3eeeef5c1e2ede8e4eff5">[email&#160;protected]</a> ~]# <strong>mount /dev/sdc /mnt2</strong>

[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0a7865657e4a6966636f647e">[email&#160;protected]</a> ~]# <strong>df -h | grep mnt</strong>
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdb        497M   11M  486M   6% /mnt
/dev/sdc       1014M   33M  982M   4% /mnt2
</pre><p>We could then add these into /etc/fstab to mount them automatically during system boot.</p><p>To log out of the iSCSI target, first unmount the disks.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="275548485367444b4e424953">[email&#160;protected]</a> /]# <strong>umount /mnt</strong>
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2a5845455e6a4946434f445e">[email&#160;protected]</a> /]# <strong>umount /mnt2</strong>
</pre><p>Then perform the actual log out, after this we confirm there are no active sessions.</p><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="40322f2f3400232c29252e34">[email&#160;protected]</a> ~]# <strong>iscsiadm -m node -u</strong>
Logging out of session [sid: 1, target: iqn.2016-01.com.example:target, portal: 192.168.1.200,3260]
Logout of [sid: 1, target: iqn.2016-01.com.example:target, portal: 192.168.1.200,3260] successful.

[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8dffe2e2f9cdeee1e4e8e3f9">[email&#160;protected]</a> ~]# <strong>iscsiadm -m session -P 0</strong>
iscsiadm: No active sessions.
</pre><p>At this point if we rebooted the client system, it will automatically log back in to the iSCSI target, so if you did set up auto mounting via /etc/fstab it should mount properly. If we then reboot the iSCSI target server, it should automatically start up the target service, making the iSCSI target available on system boot.</p><h3>Extra Tips</h3><p>Well that&#8217;s quite a bit too remember! Luckily almost all of this information is available in the targetcli and iscsiadm manual pages, so keep these in mind if you get stuck.</p><pre>man targetcli
man iscsiadm
</pre><h2>Summary</h2><p>We have now shown you how to first configure the iSCSI target on the server that will be exporting its storage over the network, and then set up an iSCSI initiator on a client system to connect to the target server. Once connected, the iSCSI initiator client is able to make use of the disks exported on the iSCSI target server as though they were locally attached. This includes performing operations such as partitioning or creating a file system and then mounting the disks and accessing them over the network to read and write data via iSCSI.</p><hr><p><em>This post is part of our Red Hat Certified Engineer (RHCE) exam study guide series. For more RHCE related posts and information check out our full <a href=https://www.rootusers.com/red-hat-certified-engineer-rhce-7-ex300-study-guide/ target=_blank rel="noopener noreferrer">RHCE study guide</a>.</em></p><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class=sd-content><ul><li class=share-facebook><a rel="nofollow noopener noreferrer" data-shared=sharing-facebook-2330 class="share-facebook sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=facebook" target=_blank title="Click to share on Facebook"><span></span><span class=sharing-screen-reader-text>Click to share on Facebook (Opens in new window)</span></a></li><li class=share-twitter><a rel="nofollow noopener noreferrer" data-shared=sharing-twitter-2330 class="share-twitter sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=twitter" target=_blank title="Click to share on Twitter"><span></span><span class=sharing-screen-reader-text>Click to share on Twitter (Opens in new window)</span></a></li><li class=share-linkedin><a rel="nofollow noopener noreferrer" data-shared=sharing-linkedin-2330 class="share-linkedin sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=linkedin" target=_blank title="Click to share on LinkedIn"><span></span><span class=sharing-screen-reader-text>Click to share on LinkedIn (Opens in new window)</span></a></li><li class=share-tumblr><a rel="nofollow noopener noreferrer" data-shared class="share-tumblr sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=tumblr" target=_blank title="Click to share on Tumblr"><span></span><span class=sharing-screen-reader-text>Click to share on Tumblr (Opens in new window)</span></a></li><li class=share-reddit><a rel="nofollow noopener noreferrer" data-shared class="share-reddit sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=reddit" target=_blank title="Click to share on Reddit"><span></span><span class=sharing-screen-reader-text>Click to share on Reddit (Opens in new window)</span></a></li><li class=share-pinterest><a rel="nofollow noopener noreferrer" data-shared=sharing-pinterest-2330 class="share-pinterest sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=pinterest" target=_blank title="Click to share on Pinterest"><span></span><span class=sharing-screen-reader-text>Click to share on Pinterest (Opens in new window)</span></a></li><li class=share-pocket><a rel="nofollow noopener noreferrer" data-shared class="share-pocket sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=pocket" target=_blank title="Click to share on Pocket"><span></span><span class=sharing-screen-reader-text>Click to share on Pocket (Opens in new window)</span></a></li><li class=share-email><a rel="nofollow noopener noreferrer" data-shared class="share-email sd-button share-icon no-text" href="https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/?share=email" target=_blank title="Click to email this to a friend"><span></span><span class=sharing-screen-reader-text>Click to email this to a friend (Opens in new window)</span></a></li><li class=share-end></li></ul></div></div></div><div id=jp-relatedposts class=jp-relatedposts><h3 class="jp-relatedposts-headline"><em>Related</em></h3></div></div><div class=post-info-bottom>
<span class=post-info-category><a href=https://www.rootusers.com/category/how-to/ rel="category tag">How To</a>, <a href=https://www.rootusers.com/category/linux/ rel="category tag">Linux</a></span><span class=post-info-tags><a href=https://www.rootusers.com/tag/iscsi/ rel=tag>iSCSI</a>, <a href=https://www.rootusers.com/tag/linux/ rel=tag>Linux</a>, <a href=https://www.rootusers.com/tag/rhce/ rel=tag>RHCE</a></span></div><div id=nav-below><div class=nav-previous><a href=https://www.rootusers.com/how-to-configure-local-dns-query-cache-in-linux/ rel=prev><span class=meta-nav>&larr;</span> How To Configure Local DNS Query Cache In Linux With Dnsmasq</a></div><div class=nav-next><a href=https://www.rootusers.com/linux-web-server-performance-benchmark-2016-results/ rel=next>Linux Web Server Performance Benchmark &#8211; 2016 Results <span class=meta-nav>&rarr;</span></a></div></div></div><div id=comments-div><span id=comments-addcomment><a href=#respond rel=nofollow title="Leave a comment ?">Leave a comment ?</a></span><h2 id="comments">10 Comments.</h2></div><ol class=commentlist id=thecomments>
<li class="comment even thread-even depth-1" id=li-comment-2321><div id=comment-2321><div class="comment-author vcard">
<cite class=fn><a href=http://www.lisent.com rel='external nofollow ugc' class=url>Tomas</a></cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-2321>July 21, 2016 at 2:14 am</a></span></div><div class=comment-text><p>Ensure that the iscsi and iscsid services are enabled on the client, otherwise you may have some unexpected fun after system restart.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-2321 data-commentid=2321 data-postid=2330 data-belowelement=comment-2321 data-respondelement=respond data-replyto="Reply to Tomas" aria-label='Reply to Tomas'>Reply</a></div></div><ul class=children><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id=li-comment-2362><div id=comment-2362><div class="comment-author vcard">
<cite class=fn><a href="https://www.rootusers.com" rel='external nofollow ugc' class=url>Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-2362>August 24, 2016 at 9:12 pm</a></span></div><div class=comment-text><p>Quite right, I&#8217;ve updated the post thanks!</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-2362 data-commentid=2362 data-postid=2330 data-belowelement=comment-2362 data-respondelement=respond data-replyto="Reply to Jarrod" aria-label='Reply to Jarrod'>Reply</a></div></div></li></ul>
</li><li class="comment even thread-odd thread-alt depth-1" id=li-comment-2503><div id=comment-2503><div class="comment-author vcard">
<cite class=fn>Mark</cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-2503>December 14, 2016 at 6:19 am</a></span></div><div class=comment-text><p>Thank you so much. I was running off two different blogs, ones that didn&#8217;t go through fully what I was doing. And yours answered my questions.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-2503 data-commentid=2503 data-postid=2330 data-belowelement=comment-2503 data-respondelement=respond data-replyto="Reply to Mark" aria-label='Reply to Mark'>Reply</a></div></div><ul class=children><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id=li-comment-2504><div id=comment-2504><div class="comment-author vcard">
<cite class=fn><a href="https://www.rootusers.com" rel='external nofollow ugc' class=url>Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-2504>December 14, 2016 at 6:50 pm</a></span></div><div class=comment-text><p>Yeah I know the feeling! I remember when studying for my RHCE that there was so much conflicting information out there that didn&#8217;t work as I needed, so when I worked everything out I tried my best to illustrate it clearly in my posts.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-2504 data-commentid=2504 data-postid=2330 data-belowelement=comment-2504 data-respondelement=respond data-replyto="Reply to Jarrod" aria-label='Reply to Jarrod'>Reply</a></div></div></li></ul>
</li><li class="comment even thread-even depth-1" id=li-comment-3254><div id=comment-3254><div class="comment-author vcard">
<cite class=fn>Tanu Shree</cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-3254>December 12, 2017 at 6:35 pm</a></span></div><div class=comment-text><p>I have configured iscsi target on ubuntu 16.04 and initiator is Microsoft Windows computer.Please share with me a link or some help so that I can use it. I want to know how to access the file system on target on initiator and vice versa.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-3254 data-commentid=3254 data-postid=2330 data-belowelement=comment-3254 data-respondelement=respond data-replyto="Reply to Tanu Shree" aria-label='Reply to Tanu Shree'>Reply</a></div></div><ul class=children><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id=li-comment-3255><div id=comment-3255><div class="comment-author vcard">
<cite class=fn><a href="https://www.rootusers.com" rel='external nofollow ugc' class=url>Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-3255>December 12, 2017 at 6:47 pm</a></span></div><div class=comment-text><p>Once the target is setup you should be able to walk through the GUI on the Windows side to put the information in and connect.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-3255 data-commentid=3255 data-postid=2330 data-belowelement=comment-3255 data-respondelement=respond data-replyto="Reply to Jarrod" aria-label='Reply to Jarrod'>Reply</a></div></div></li></ul>
</li><li class="comment even thread-odd thread-alt depth-1" id=li-comment-3728><div id=comment-3728><div class="comment-author vcard">
<cite class=fn>Srashti Tomar</cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-3728>June 8, 2018 at 2:17 pm</a></span></div><div class=comment-text><p>I am facing error while i am trying to login at client side. error 24 login failed due to Authorization failure. My entries in initiator.iscsi is all good still getting error</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-3728 data-commentid=3728 data-postid=2330 data-belowelement=comment-3728 data-respondelement=respond data-replyto="Reply to Srashti Tomar" aria-label='Reply to Srashti Tomar'>Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id=li-comment-4356><div id=comment-4356><div class="comment-author vcard">
<cite class=fn><a href=https://charlesleaver.com/ rel='external nofollow ugc' class=url>chukaman</a></cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-4356>May 27, 2019 at 5:15 am</a></span></div><div class=comment-text><p>Thanks a lot this all went perfectly for me on Ubuntu 18.04.2 LTS and was very useful.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-4356 data-commentid=4356 data-postid=2330 data-belowelement=comment-4356 data-respondelement=respond data-replyto="Reply to chukaman" aria-label='Reply to chukaman'>Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id=li-comment-5083><div id=comment-5083><div class="comment-author vcard">
<cite class=fn>Art F</cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-5083>February 9, 2021 at 11:34 am</a></span></div><div class=comment-text><p>Great guide &#8211; took 30 minutes in a VM environment, and was a great learning experience. Thanks!</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-5083 data-commentid=5083 data-postid=2330 data-belowelement=comment-5083 data-respondelement=respond data-replyto="Reply to Art F" aria-label='Reply to Art F'>Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id=li-comment-5110><div id=comment-5110><div class="comment-author vcard">
<cite class=fn>ScumCoder</cite>
<span class="comment-meta commentmetadata"><a href=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/#comment-5110>April 20, 2021 at 6:55 am</a></span></div><div class=comment-text><blockquote><p>At this point if we rebooted the client system, it will automatically log back in to the iSCSI target, so if you did set up auto mounting via /etc/fstab it should mount properly.</p></blockquote><p>In order for this to work, the <code>node.startup</code> value for this target should be set to <code>automatic</code> instead of <code>manual</code>. Depending on your setup, you might have to do this in <code>/etc/iscsi/nodes/IQN/IP/default</code>, <code>/etc/iscsi/iscsid.conf</code>, or both.</p></div><div class=reply>
<a rel=nofollow class=comment-reply-link href=#comment-5110 data-commentid=5110 data-postid=2330 data-belowelement=comment-5110 data-respondelement=respond data-replyto="Reply to ScumCoder" aria-label='Reply to ScumCoder'>Reply</a></div></div></li></ol><div class=navigation></div><div id=respond class=comment-respond><h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel=nofollow id=cancel-comment-reply-link href=/how-to-configure-an-iscsi-target-and-initiator-in-linux/#respond style=display:none;><small>Cancel reply</small></a></small></h3><form action=https://www.rootusers.com/wp-comments-post.php method=post id=commentform class=comment-form><p class=comment-form-comment><textarea aria-required=true rows=8 cols=45 name=comment id=comment onkeydown="if (!window.__cfRLUnblockHandlers) return false; if(event.ctrlKey){if(event.keyCode==13){document.getElementById('submit').click();return false}};" data-cf-modified-92cf0ff1378341c9287dec5e-=""></textarea></p><p class=comment-note>NOTE - You can use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:<br> <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class=comment-form-author><input id=author name=author type=text value size=30> <label for=author><small>NAME</small></label></p><p class=comment-form-email><input id=email name=email type=text value size=30> <label for=email>EMAIL</label></p><p class=comment-form-url><input id=url name=url type=text value size=30> <label for=url>Website URL</label></p><p class=comment-subscription-form><input type=checkbox name=subscribe_comments id=subscribe_comments value=subscribe style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class=subscribe-label id=subscribe-label for=subscribe_comments>Notify me of follow-up comments by email.</label></p><p class=comment-subscription-form><input type=checkbox name=subscribe_blog id=subscribe_blog value=subscribe style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class=subscribe-label id=subscribe-blog-label for=subscribe_blog>Notify me of new posts by email.</label></p><p class=form-submit><input name=submit type=submit id=submit class=submit value=SUBMIT> <input type=hidden name=comment_post_ID value=2330 id=comment_post_ID>
<input type=hidden name=comment_parent id=comment_parent value=0></p><p style="display: none;"><input type=hidden id=akismet_comment_nonce name=akismet_comment_nonce value=ac77ee2bc8></p><p style="display: none !important;"><label>&#916;<textarea name=ak_hp_textarea cols=45 rows=8 maxlength=100></textarea></label><input type=hidden id=ak_js name=ak_js value=41><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="92cf0ff1378341c9287dec5e-text/javascript">document.getElementById("ak_js").setAttribute("value",(new Date()).getTime());</script></p></form></div></div><div id=sidebar-border><div id=rss_border><div class=rss_border><div id=rss_wrap><div class=rss_wrap>
<a class=facebook href=https://www.facebook.com/rootusers1 target=_blank rel=author title=Facebook>Facebook</a>
<a class=twitter href=https://twitter.com/RootUsers_ target=_blank rel=author title="Follow me on twitter.">Follow me on twitter.</a>
<a class=googleplus href=https://google.com/+Rootusers1 target=_blank rel=publisher title=Google+>Google+</a>
<a class="rss " href=https://www.rootusers.com/feed/ target=_blank rel=bookmark title="RSS Feed">RSS Feed</a></div></div></div></div><div id=sidebar><div id=text-4 class="widget widget_text"><div class=textwidget><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js type="92cf0ff1378341c9287dec5e-text/javascript"></script>
<ins class=adsbygoogle style=display:inline-block;width:300px;height:250px data-ad-client=ca-pub-5558140142523368 data-ad-slot=9802576336></ins> <script type="92cf0ff1378341c9287dec5e-text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div id=blog_subscription-2 class="widget widget_blog_subscription jetpack_subscription_widget"><h3 class="widgettitle">Subscribe</h3><form action=# method=post accept-charset=utf-8 id=subscribe-blog-blog_subscription-2><div id=subscribe-text><p>Receive new post notifications by email for free! Unsubscribe any time.</p></div><p id=subscribe-email>
<label id=jetpack-subscribe-label class=screen-reader-text for=subscribe-field-blog_subscription-2>
Email Address </label>
<input type=email name=email required=required value id=subscribe-field-blog_subscription-2 placeholder="Email Address"></p><p id=subscribe-submit>
<input type=hidden name=action value=subscribe>
<input type=hidden name=source value=https://www.rootusers.com/how-to-configure-an-iscsi-target-and-initiator-in-linux/>
<input type=hidden name=sub-type value=widget>
<input type=hidden name=redirect_fragment value=subscribe-blog-blog_subscription-2>
<button type=submit class=wp-block-button__link name=jetpack_subscriptions_widget>
Subscribe </button></p></form></div><div id=recent-posts-2 class="widget widget_recent_entries"><h3 class="widgettitle">Recent Posts</h3><ul>
<li>
<a href=https://www.rootusers.com/how-to-fix-tp-link-tl-sx1008-switch-fan-noise/>How To Fix TP-Link TL-SX1008 Switch Fan Noise</a>
</li>
<li>
<a href=https://www.rootusers.com/create-and-edit-text-files-rhel-8-rhcsa/>Create and edit text files &#8211; RHEL 8 RHCSA</a>
</li>
<li>
<a href=https://www.rootusers.com/create-delete-copy-and-move-files-and-directories-rhel-8-rhcsa/>Create, delete, copy, and move files and directories &#8211; RHEL 8 RHCSA</a>
</li>
<li>
<a href=https://www.rootusers.com/rhcsa-8-create-hard-and-soft-links/>Create hard and soft links &#8211; RHEL 8 RHCSA</a>
</li>
<li>
<a href=https://www.rootusers.com/amd-radeon-vii-hashcat-benchmark/>AMD Radeon VII &#8211; Hashcat Benchmark</a>
</li></ul></div><div id=categories-2 class="widget widget_categories"><h3 class="widgettitle">Categories</h3><ul>
<li class="cat-item cat-item-82"><a href=https://www.rootusers.com/category/command-examples/>Command Examples</a>
</li>
<li class="cat-item cat-item-48"><a href=https://www.rootusers.com/category/exam-guides/>Exam Guides</a>
</li>
<li class="cat-item cat-item-63"><a href=https://www.rootusers.com/category/how-to/>How To</a>
</li>
<li class="cat-item cat-item-4"><a href=https://www.rootusers.com/category/linux/>Linux</a>
</li>
<li class="cat-item cat-item-61"><a href=https://www.rootusers.com/category/security/>Security</a>
</li>
<li class="cat-item cat-item-3"><a href=https://www.rootusers.com/category/technology/>Technology</a>
</li>
<li class="cat-item cat-item-1"><a href=https://www.rootusers.com/category/uncategorized/>Uncategorized</a>
</li>
<li class="cat-item cat-item-5"><a href=https://www.rootusers.com/category/windows/>Windows</a>
</li>
<li class="cat-item cat-item-60"><a href=https://www.rootusers.com/category/xenserver/>XenServer</a>
</li></ul></div><div id=text-5 class="widget widget_text"><div class=textwidget><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js type="92cf0ff1378341c9287dec5e-text/javascript"></script>
<ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-5558140142523368 data-ad-slot=2708682732></ins> <script type="92cf0ff1378341c9287dec5e-text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></div></div></div><div class=clear></div><div id=footer><div id=footer-inside><p>
Copyright &copy; 2021 RootUsers | <a href=https://www.rootusers.com/privacy-policy/>Privacy Policy</a> | <a href=https://www.rootusers.com/terms-and-conditions/>Terms and Conditions</a></p>
<span id=back-to-top>&uarr; <a href=# rel=nofollow title="Back to top">Top</a></span></div></div> <script type="92cf0ff1378341c9287dec5e-text/javascript">(function(){var nav=document.getElementById('menus'),button=document.getElementById('menus-m'),menu=document.getElementById('menus-dt');if(!nav){return;}
if(!button){return;}
if(!menu||!menu.childNodes.length){button.style.display='none';return;}
button.onclick=function(){if(-1!==button.className.indexOf('b-toggled-on')){button.className=button.className.replace(' b-toggled-on','');menu.className=menu.className.replace(' toggled-on','');}else{button.className+=' b-toggled-on';menu.className+=' toggled-on';}};})();</script> <script type="92cf0ff1378341c9287dec5e-text/javascript">window.WPCOM_sharing_counts={"https:\/\/www.rootusers.com\/how-to-configure-an-iscsi-target-and-initiator-in-linux\/":2330};</script> <div id=sharing_email style="display: none;"><form action=/how-to-configure-an-iscsi-target-and-initiator-in-linux/ method=post>
<label for=target_email>Send to Email Address</label>
<input type=email name=target_email id=target_email value>
<label for=source_name>Your Name</label>
<input type=text name=source_name id=source_name value><label for=source_email>Your Email Address</label>
<input type=email name=source_email id=source_email value><input type=text id=jetpack-source_f_name name=source_f_name class=input value size=25 autocomplete=off title="This field is for validation and should not be changed">
<img style="float: right; display: none" class=loading src=https://www.rootusers.com/wp-content/plugins/jetpack/modules/sharedaddy/images/loading.gif alt=loading width=16 height=16>
<input type=submit value="Send Email" class=sharing_send>
<a rel=nofollow href=#cancel class=sharing_cancel role=button>Cancel</a><div class="errors errors-1" style="display: none;">
Post was not sent - check your email addresses!</div><div class="errors errors-2" style="display: none;">
Email check failed, please try again</div><div class="errors errors-3" style="display: none;">
Sorry, your blog cannot share posts by email.</div></form></div> <script defer src=https://www.rootusers.com/wp-content/cache/minify/39598.js type="92cf0ff1378341c9287dec5e-text/javascript"></script> <script type="92cf0ff1378341c9287dec5e-text/javascript" id=sharing-js-js-extra>var sharing_js_options={"lang":"en","counts":"1","is_stats_active":"1"};</script> <script defer src=https://www.rootusers.com/wp-content/cache/minify/d6089.js type="92cf0ff1378341c9287dec5e-text/javascript"></script> <script type="92cf0ff1378341c9287dec5e-text/javascript" id=sharing-js-js-after>var windowOpen;(function(){function matches(el,sel){return!!(el.matches&&el.matches(sel)||el.msMatchesSelector&&el.msMatchesSelector(sel));}
document.body.addEventListener('click',function(event){if(!event.target){return;}
var el;if(matches(event.target,'a.share-facebook')){el=event.target;}else if(event.target.parentNode&&matches(event.target.parentNode,'a.share-facebook')){el=event.target.parentNode;}
if(el){event.preventDefault();if(typeof windowOpen!=='undefined'){windowOpen.close();}
windowOpen=window.open(el.getAttribute('href'),'wpcomfacebook','menubar=1,resizable=1,width=600,height=400');return false;}});})();var windowOpen;(function(){function matches(el,sel){return!!(el.matches&&el.matches(sel)||el.msMatchesSelector&&el.msMatchesSelector(sel));}
document.body.addEventListener('click',function(event){if(!event.target){return;}
var el;if(matches(event.target,'a.share-twitter')){el=event.target;}else if(event.target.parentNode&&matches(event.target.parentNode,'a.share-twitter')){el=event.target.parentNode;}
if(el){event.preventDefault();if(typeof windowOpen!=='undefined'){windowOpen.close();}
windowOpen=window.open(el.getAttribute('href'),'wpcomtwitter','menubar=1,resizable=1,width=600,height=350');return false;}});})();var windowOpen;(function(){function matches(el,sel){return!!(el.matches&&el.matches(sel)||el.msMatchesSelector&&el.msMatchesSelector(sel));}
document.body.addEventListener('click',function(event){if(!event.target){return;}
var el;if(matches(event.target,'a.share-linkedin')){el=event.target;}else if(event.target.parentNode&&matches(event.target.parentNode,'a.share-linkedin')){el=event.target.parentNode;}
if(el){event.preventDefault();if(typeof windowOpen!=='undefined'){windowOpen.close();}
windowOpen=window.open(el.getAttribute('href'),'wpcomlinkedin','menubar=1,resizable=1,width=580,height=450');return false;}});})();var windowOpen;(function(){function matches(el,sel){return!!(el.matches&&el.matches(sel)||el.msMatchesSelector&&el.msMatchesSelector(sel));}
document.body.addEventListener('click',function(event){if(!event.target){return;}
var el;if(matches(event.target,'a.share-tumblr')){el=event.target;}else if(event.target.parentNode&&matches(event.target.parentNode,'a.share-tumblr')){el=event.target.parentNode;}
if(el){event.preventDefault();if(typeof windowOpen!=='undefined'){windowOpen.close();}
windowOpen=window.open(el.getAttribute('href'),'wpcomtumblr','menubar=1,resizable=1,width=450,height=450');return false;}});})();var windowOpen;(function(){function matches(el,sel){return!!(el.matches&&el.matches(sel)||el.msMatchesSelector&&el.msMatchesSelector(sel));}
document.body.addEventListener('click',function(event){if(!event.target){return;}
var el;if(matches(event.target,'a.share-pocket')){el=event.target;}else if(event.target.parentNode&&matches(event.target.parentNode,'a.share-pocket')){el=event.target.parentNode;}
if(el){event.preventDefault();if(typeof windowOpen!=='undefined'){windowOpen.close();}
windowOpen=window.open(el.getAttribute('href'),'wpcompocket','menubar=1,resizable=1,width=450,height=450');return false;}});})();</script> <script src=https://stats.wp.com/e-202150.js defer type="92cf0ff1378341c9287dec5e-text/javascript"></script> <script type="92cf0ff1378341c9287dec5e-text/javascript">_stq=window._stq||[];_stq.push(['view',{v:'ext',j:'1:10.4',blog:'82012818',post:'2330',tz:'10',srv:'www.rootusers.com'}]);_stq.push(['clickTrackerInit','82012818','2330']);</script> <script type="92cf0ff1378341c9287dec5e-text/javascript">var bwpRecaptchaCallback=function(){};</script> <script src="https://www.google.com/recaptcha/api.js?onload=bwpRecaptchaCallback&#038;render=explicit" async defer type="92cf0ff1378341c9287dec5e-text/javascript"></script> <script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="92cf0ff1378341c9287dec5e-|49" defer=""></script></body></html>